<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../safadometro/estilos/principal.css">
    <title>Safadômetro</title>
</head>
<body>
    <main id="tela">
        <p>Safadômetro</p>
        <div><img src="imagens/anjoDemonio.webp" alt="Anjo e demobio"></div>
        <form action="index.html" method="post" autocomplete="off">
            <div>
                <label for="idata"></label>
                <input type="date" name="data" id="idata" required max="2024/01/01">
            </div>
            <div>
                <button onclick="calcular(event)">Calcular</button>
            </div>
        </form>
        <p id="resultado"></p>
    </main>
</body>

<script>
    function calcular(event) {
        event.preventDefault(); // Impede o envio do formulário

        var inputData = document.getElementById("idata").value;
        var dataSelecionada = new Date(inputData);
        var anoSelecionado = dataSelecionada.getFullYear();
        var ano = anoSelecionado.toString().substring(2);
        var dia = dataSelecionada.getDate();
        var mes = dataSelecionada.getMonth() + 1;

        var safadeza = safadezaCalc(dia, mes, ano);
        var anjo = anjoCalc(dia, mes, ano, safadeza);

        var resultadoElemento = document.getElementById("resultado");
        resultadoElemento.textContent = "Safadeza: " + safadeza.toFixed(2) + "% | Anjo: " + anjo.toFixed(2) + "%";
    }

    function somatorioDoMes(mes) {
        var soma = 0;
        for (var i = 1; i <= mes; i++) {
            soma += i;
        }
        return soma;
    }

    function anjoCalc(dia, mes, ano, safadeza) {
        var anjo = 100 - safadeza;
        // console.log("Anjo: " + anjo.toFixed(2) + "%");
        return anjo;
    }

    function safadezaCalc(dia, mes, ano) {
        var safadeza = somatorioDoMes(mes) + (ano / 100) * (50 - dia);
        // console.log("Safadeza: " + safadeza.toFixed(2) + "%");
        return safadeza;
    }
</script>
</html>
